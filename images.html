<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Nasa API Call</title>
        <link rel="stylesheet" href="style.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    </head>

    <header>
        <script>
            $(document).ready(function() {
                $('#menu').load('/header.html');
            });
        </script>

        <div id="menu">

        </div>
    </header>

    <body>
        <script>

            var date1 = "2021-09-08";

            var call = 0;

            function callApi(){
                if(call == 0){
                    var day1 = $("#day-1 :selected").val();
                    var month1 = $("#month-1 :selected").val();
                    var year1 = $("#year-1").val();

                    call = 1;

                    var date1 = year1+"-"+month1+"-"+day1;

                    $(document).ready(function () {  
                        $.ajax({
                            url: `https://api.nasa.gov/planetary/apod?date=${date1}&api_key=dbaTeqK3bcjUw9UFIoYcOMsiyiI4nJfaMlWToNH9`,  
                            type: 'GET',  
                            dataType: 'json',
                            success: function (data, textStatus, xhr) {
                                console.log(data);

                                $('#images').append('<img class="image" src=' + data.url + ' />');
                                $('#images .middle').append('<p>' + data.copyright + '</p>');
                                $('#images .middle').append('<h4>' + data.title + '</h4>');
                            },

                            error: function (xhr, textStatus, errorThrown) {
                                console.log('Error in Operation');
                            }
                        });
                    });
                }
            }
    
        </script>

        <div class="container my-5 px-5">
            <div class="first-date my-3">
                <select class="day" id="day-1">
                    <option value="01"> 01 </option>
                    <option value="02"> 02 </option>
                    <option value="03"> 03 </option>
                    <option value="04"> 04 </option>
                    <option value="05"> 05 </option>
                    <option value="06"> 06 </option>
                    <option value="07"> 07 </option>
                    <option value="08"> 08 </option>
                    <option value="09"> 09 </option>
                    <option value="10"> 10 </option>
                    <option value="11"> 11 </option>
                    <option value="12"> 12 </option>
                    <option value="13"> 13 </option>
                    <option value="14"> 14 </option>
                    <option value="15"> 15 </option>
                    <option value="16"> 16 </option>
                    <option value="17"> 17 </option>
                    <option value="18"> 18 </option>
                    <option value="19"> 19 </option>
                    <option value="20"> 20 </option>
                    <option value="21"> 21 </option>
                    <option value="22"> 22 </option>
                    <option value="23"> 23 </option>
                    <option value="24"> 24 </option>
                    <option value="25"> 25 </option>
                    <option value="26"> 26 </option>
                    <option value="27"> 27 </option>
                    <option value="28"> 28 </option>
                    <option value="29"> 29 </option>
                    <option value="30"> 30 </option>
                    <option value="31"> 31 </option>
                </select>
            
                <select class="month" id="month-1">
                    <option value="01"> January </option>
                    <option value="02"> Febuary </option>
                    <option value="03"> March </option>
                    <option value="04"> April </option>
                    <option value="05"> May </option>
                    <option value="06"> June </option>
                    <option value="07"> July </option>
                    <option value="08"> August </option>
                    <option value="09"> September </option>
                    <option value="10"> October </option>
                    <option value="11"> November </option>
                    <option value="12"> December </option>
                </select>
                
                <input id="year-1" class="year" type="text" value="2021">

                <button type="button" class="send" onclick="callApi()"> Send </button>
            </div>

        </div>

        <div id="images">

            <div class="middle">

            </div>

        </div>
    </body>
</html>